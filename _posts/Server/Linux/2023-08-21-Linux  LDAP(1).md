---
title:  "Linux  LDAP(1)"
excerpt: "Linux  LDAP(1) μ…λ‹λ‹¤."

categories:
  - linux
tags:
  - [Linux, Ubuntu, Raspbian]

toc: true
toc_sticky: true

last_modified_at: 2023-08-20T20:00:00-05:00
---

## κ°μ”

## OpenLdap μ„¤μΉμ‹ μƒμ„±λλ” κ²ƒλ“¤
```bash
#tree /etc/openldap
/etc/openldap
β”β”€β”€ certs
β”‚   β”β”€β”€ cert8.db
β”‚   β”β”€β”€ key3.db
β”‚   β”β”€β”€ password
β”‚   β””β”€β”€ secmod.db
β”β”€β”€ check_password.conf
β”β”€β”€ ldap.conf
β”β”€β”€ schema
β”‚   β”β”€β”€ collective.ldif
β”‚   β”β”€β”€ collective.schema
β”‚   β”β”€β”€ corba.ldif
β”‚   β”β”€β”€ corba.schema
β”‚   β”β”€β”€ core.ldif
β”‚   β”β”€β”€ core.schema
β”‚   β”β”€β”€ cosine.ldif
β”‚   β”β”€β”€ cosine.schema
β”‚   β”β”€β”€ duaconf.ldif
β”‚   β”β”€β”€ duaconf.schema
β”‚   β”β”€β”€ dyngroup.ldif
β”‚   β”β”€β”€ dyngroup.schema
β”‚   β”β”€β”€ inetorgperson.ldif
β”‚   β”β”€β”€ inetorgperson.schema
β”‚   β”β”€β”€ java.ldif
β”‚   β”β”€β”€ java.schema
β”‚   β”β”€β”€ misc.ldif
β”‚   β”β”€β”€ misc.schema
β”‚   β”β”€β”€ nis.ldif
β”‚   β”β”€β”€ nis.schema
β”‚   β”β”€β”€ openldap.ldif
β”‚   β”β”€β”€ openldap.schema
β”‚   β”β”€β”€ pmi.ldif
β”‚   β”β”€β”€ pmi.schema
β”‚   β”β”€β”€ ppolicy.ldif
β”‚   β””β”€β”€ ppolicy.schema
β””β”€β”€ slapd.d
    β”β”€β”€ cn=config
    β”‚   β”β”€β”€ cn=schema
    β”‚   β”‚   β””β”€β”€ cn={0}core.ldif
    β”‚   β”β”€β”€ cn=schema.ldif
    β”‚   β”β”€β”€ olcDatabase={0}config.ldif
    β”‚   β”β”€β”€ olcDatabase={-1}frontend.ldif
    β”‚   β”β”€β”€ olcDatabase={1}monitor.ldif
    β”‚   β””β”€β”€ olcDatabase={2}hdb.ldif
    β””β”€β”€ cn=config.ldif

```

### μƒμ„Έλ‚΄μ©
```bash
#1 OpenLDAP μ„λ²„μ [μ„¤μ •νμΌ]κ³Ό [λ°μ΄ν„°λ² μ΄μ¤]κ°€ κ΄€λ¦¬
/etc/openldap 

#2 OpenLDAP μ„λ²„μ [μ‹¤ν–‰νμΌ]
/usr/sbin/slapd

```

> β—μ„¤μ •νμΌ (λ²„μ „μ— λ”°λΌ λ‹¤λ¦„)  
> π’΅ slapd.conf  
> π’΅ ldap.conf  
>   - CentOS 7.X ν™κ²½μ—μ„ ν¨ν‚¤μ§€ μ„¤μΉμ—μ„ ldap.conf ν™•μΈν•¨. (uname -a)  
>   
> β—λ°μ΄ν„°λ² μ΄μ¤ (λ²„μ „μ— λ”°λΌ λ‹¤λ¦„)  
> π’΅ /slapd.d 
> π’΅ νΈλ¦¬κµ¬μ΅°λ΅ μ΅΄μ¬ν•λ‹¤.   
>   - 2.4 λ²„μ „ μ΄μƒμ΄λ©΄ ν†µμƒ /slapd.d λ””λ ‰ν† λ¦¬ λ‚΄λ¶€μ— μ €μ¥ν•¨.
>   
> β—μ‹¤ν–‰νμΌ (λ²„μ „μ— λ”°λΌ λ‹¤λ¦„)  
> π’΅ /usr/sbin/slapd  
> π’΅ OpenLdap ν¨ν‚¤μ§€μ„¤μΉμ‹ μλ™μΌλ΅ μ΄ λ°λ¬μ΄ μƒμ„±λλ‹¤.  
> π’΅ μ΄ μ‹¤ν–‰ νμΌμ„ μ‚¬μ©ν•μ—¬ LDAP μ„λ²„λ¥Ό μ‹μ‘ν•κ³  μ¤‘μ§€ν•λ©°, μ„λ²„μ λ™μ‘μ„ κ΄€λ¦¬ν•λ‹¤.  
>    
> ```bash
> systemctl start slapd 
> 
> systemctl start slapd 
> ```



## LDAP μ„λ²„ μ‘λ™μ—¬λ¶€ ν™•μΈν•κΈ°
### STEP1. LDAP μ„λ²„ ν”„λ΅μ„Έμ¤ ν™•μΈ
```bash
# LDAP μ„λ²„ ν”„λ΅μ„Έμ¤ ν™•μΈ λ°©λ²•1
#   - slapd λλ” slapd -h "ldap:///"μ™€ κ°™μ€ κ²°κ³Όκ°€ ν‘μ‹λλ‹¤. 
#   - μ΄κ²ƒμ€ LDAP μ„λ²„ ν”„λ΅μ„Έμ¤κ°€ μ‹¤ν–‰ μ¤‘μ„μ„ λ‚νƒ€λ‚Έλ‹¤.
ps aux | grep
ldap  31742  0.0  0.0 1353996 1820 ?    Ssl   2021    2:11 /user/sbin/slapd -u ldap -h ldapi:/// ldap:///

```
  
```bash
# LDAP μ„λ²„ ν”„λ΅μ„Έμ¤ ν™•μΈ λ°©λ²•2
#    - OpenLDAP λ°λ¬μ„ κµ¬λ™μ„ ν™•μΈν•λ‹¤.
β— slapd.service - OpenLDAP Server Daemon
   Loaded: loaded (/usr/lib/systemd/system/slapd.service; disabled; vendor preset: disabled)
   Active: active (running) since Mon 2017-10-16 06:25:09 UTC; 4s ago
     Docs: man:slapd
           man:slapd-config
           man:slapd-hdb
           man:slapd-mdb
           file:///usr/share/doc/openldap-servers/guide.html
 Main PID: 31742 (slapd)
   CGroup: /system.slice/slapd.service
           β””β”€31742 /usr/sbin/slapd -u ldap -h ldapi:/// ldap:///

```


### STEP2. LDAP ν¬νΈ ν™•μΈ
```bash
# OpenLDAP μ„λ²„λ” LDAP ν†µμ‹ μ„ μ„ν•΄ κΈ°λ³Έμ μΌλ΅ TCP ν¬νΈ 389λ¥Ό μ‚¬μ©
# TLS/SSLμ„ μ‚¬μ©ν•λ” κ²½μ° TCP ν¬νΈ 636μ„ μ‚¬μ© κ°€λ¥. 
netstat -tuln | grep 389
tcp      0      0 0.0.0.0:389      0.0.0.0:*     LISTEN
tcp6     0      0 :::389           :::*          LISTEN

```


### STEP3. LDAP κ²€μƒ‰ μ‹ν—
```bash
# νΈλ¦¬κµ¬μ΅°μ μ €μ¥λ λ°μ΄ν„°κ°€ κ²€μƒ‰λλ‹¤.
ldapsearch -x -b "dc=blgcard,dc=com"

```


### STEP4. LDAP λ²„μ „ν™•μΈ
```bash
# LDAP μ„λ²„μ λ²„μ „μ„ ν™•μΈν•λ‹¤.
ldapsearch -V

```






