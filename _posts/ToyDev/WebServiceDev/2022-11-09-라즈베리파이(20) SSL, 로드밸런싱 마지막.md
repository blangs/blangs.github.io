---
title:  "ë¼ì¦ˆë² ë¦¬íŒŒì´(20) SSL, ë¡œë“œë°¸ëŸ°ì‹± ë§ˆì§€ë§‰"
excerpt: "ë¼ì¦ˆë² ë¦¬íŒŒì´(20) SSL, ë¡œë“œë°¸ëŸ°ì‹± ë§ˆì§€ë§‰ ì…ë‹ˆë‹¤."
categories:
  - web-service-dev
tags:
  - [web, dev]
toc: true
toc_sticky: true

last_modified_at: 2022-11-10T20:00:00-05:00
---

## ê°œìš”
> â—<span style="color:green"><I><b>ìš”ì•½</b></I></span>      
> ğŸ’¡ SSL ì¶”ê°€ë¡œ ì¸í•´ ë¡œë“œë°¸ëŸ°ì‹± ì„¤ì •ì´ ì¶”ê°€ë˜ì–´ì§ ex) https ì˜ ë¡œë“œë°¸ëŸ°ì‹±  
> ğŸ’¡ ì •ë¦¬í• ê²¸ ë‹¤ì‹œ í¬ìŠ¤íŒ…í•œë‹¤.  


## HTTP ë¡œë“œë°¸ëŸ°ì‹± ì²˜ë¦¬í•˜ê¸°
> â—<span style="color:green"><I><b>ê°€ìƒí˜¸ìŠ¤íŠ¸ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ë³€ê²½í•œë‹¤.</b></I></span>      
> ğŸ’¡ SSL ì¶”ê°€ë¡œ ì¸í•´ ë¡œë“œë°¸ëŸ°ì‹± ì„¤ì •ì´ ì¶”ê°€ë˜ì–´ì§ ex) https ì˜ ë¡œë“œë°¸ëŸ°ì‹±  
> ğŸ’¡ ì •ë¦¬í• ê²¸ ë‹¤ì‹œ í¬ìŠ¤íŒ…í•œë‹¤.  


### STEP1. (httpd.conf) ê¸°ì¡´ ë¡œë“œë°¸ëŸ°ì‹± ì œê±°
```bash
# ASIS
#jkMount /* lilo_lb

# TOBE1
#JkMount /* blang_balancer
#JkUnMount /.well-known/acme-challenge/* blang_balancer
#JkUnMount /jktest/* blang_balancer
# [23.08.15] vhost ì—ì„œì²˜ë¦¬í•˜ë„ë¡ ë³€ê²½.

```
   
> â—<span style="color:green"><I><b>ì„¤ëª…</b></I></span>      
> ğŸ’¡ ê¸°ì¡´ ì „ì—­ì„¤ì •íŒŒì¼ì— ë¡œë“œë°¸ëŸ°ì‹±ì„ ì œê±°í–ˆë‹¤. 
  
   
### STEP2. (httpd-vhosts.conf) ê°€ìƒ í˜¸ìŠ¤íŠ¸ ë¡œë“œë°¸ëŸ°ì‹± ì¶”ê°€
```bash
# Server1 :: www.blang.co.kr ìœ¼ë¡œ ìš”ì²­í•œê²½ìš°
<VirtualHost *:9510>
    ServerAdmin layup3@naver.com
    DocumentRoot "/fswas/apache/httpd/httpd-2.4.541/htdocs"
    ServerName www.blang.co.kr
    ErrorLog "/fswaslog/apache/dbd/error_log"
    CustomLog "/fswaslog/apache/dbd/error_log" common

     RewriteEngine On
     RewriteCond %{HTTPS} off
     RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

     JkMount /* blang_balancer
     JkUnMount /jktest/* blang_balancer

</VirtualHost>


# Server2 :: blang.co.kr ìœ¼ë¡œ ìš”ì²­í•œê²½ìš°
<VirtualHost *:9510>
    ServerAdmin layup3@naver.com
    ServerName blang.co.kr
    ErrorLog "/fswaslog/apache/dbd/error_log"
    CustomLog "/fswaslog/apache/dbd/error_log" common

    RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule (.*) https://www.%{HTTP_HOST}%{REQUEST_URI}

    JkMount /* blang_balancer
    JkUnMount /jktest/* blang_balancer

</VirtualHost>

```
   
> â—<span style="color:green"><I><b>ì„¤ëª…</b></I></span>      
> ğŸ’¡ ê°ê° ì¶”ê°€í•´ì¤¬ë‹¤.  
> ğŸ’¡ ì´ì œ http ìš”ì²­ì´ ì˜¤ë©´ ì´ê³³ì—ì„œ ë¡œë“œë°¸ëŸ°ì‹± ì„¤ì •ì„ í˜¸ì¶œí•œë‹¤. 


## HTTP ë¡œë“œë°¸ëŸ°ì‹± webì„œë²„ ì •ì íŒŒì¼ ì œì™¸í•˜ê¸°
### STEP1. (httpd-vhosts.conf) ê°€ìƒ í˜¸ìŠ¤íŠ¸ì— íŒ¨í„´ì¶”ê°€
```bash
<VirtualHost *:9510>
    ServerAdmin layup3@naver.com
    ServerName blang.co.kr
    ErrorLog "/fswaslog/apache/dbd/error_log"
    CustomLog "/fswaslog/apache/dbd/error_log" common

    RewriteEngine On
    RewriteCond %{REQUEST_URI} !^/jktest/.*
    RewriteCond %{HTTPS} off
    RewriteRule (.*) https://www.%{HTTP_HOST}%{REQUEST_URI}

    JkMount /* blang_balancer
    JkUnMount /jktest/* blang_balancer

</VirtualHost>

```

> â—<span style="color:green"><I><b>ì„¤ëª…</b></I></span>     
>      
> ```bash
> RewriteCond %{REQUEST_URI} !^/jktest/.*
> ``` 
>  
> ğŸ’¡ http ìš”ì²­ì— ëŒ€í•´ íŠ¹ì • íŒ¨í„´ì´ ë“¤ì–´ì˜¤ë©´ https ì¸¡ìœ¼ë¡œ ìš”ì²­ì„ ìˆ˜í–‰í•˜ì§€ì•ŠëŠ”ë‹¤.    
> ğŸ’¡ ì¦‰, /jktest ìš”ì²­ì´ì˜¤ë©´ sslì„ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤.  


## HTTPS(SSL) ë¡œë“œë°¸ëŸ°ì‹± ì²˜ë¦¬í•˜ê¸°
### STEP2. (httpd-ssl.conf) ssl ë¡œë“œë°¸ëŸ°ì‹± ì¶”ê°€

```bash
 ìš”ì•½ë‚´ìš©
 <VirtualHost _default_:443>

     # ê¸°ë³¸ì •ë³´
     DocumentRoot "/fswas/apache/httpd/httpd-2.4.541/htdocs"
     ServerName www.blang.co.kr
     ServerAdmin layup3@naver.com
     ErrorLog "/fswas/apache/httpd/httpd-2.4.541/logs/error_log"
     TransferLog "/fswas/apache/httpd/httpd-2.4.541/logs/access_log"

     # SSL ì—”ì§„
     SSLEngine on

     # SSL ì¸ì¦ì„œ
     SSLCertificateFile "/etc/letsencrypt/live/www.blang.co.kr/cert.pem"
     SSLCertificateKeyFile "/etc/letsencrypt/live/www.blang.co.kr/privkey.pem"
     SSLCACertificateFile "/etc/letsencrypt/live/www.blang.co.kr/chain.pem"

     # SSL ë¡œë“œë°¸ëŸ°ì‹±ì²˜ë¦¬(ì´ë¶€ë¶„ ìˆì–´ì•¼ WASì¸¡ httpsì ‘ì†ê°€ëŠ¥)
     JkMount /* blang_balancer
     # JkUnMount /jktest/* blang_balancer  // SSLì€ ì˜ë¯¸ì—†ìŒ

 </VirtualHost>


```

> â—<span style="color:green"><I><b>ì„¤ëª…</b></I></span>      
> ğŸ’¡ ì´ë¯¸ ì ìš©ëœ ë‚´ìš©ì¸ë° ë‹¤ì‹œí•œë²ˆ ì‘ì„±í–ˆë‹¤.   
> ğŸ’¡ ìµœí•˜ë‹¨ì— SSLh(https) ìš”ì²­ì´ì˜¤ë©´ ë¡œë“œë°¸ëŸ°ì‹±ì´ ì‘ë™í•˜ë„ë¡ ì„¤ì •í–ˆë‹¤.
> 
> â—<span style="color:green"><I><b>ê³¼ì •</b></I></span>      
> ğŸ’¡ 1. ì‚¬ìš©ì ìš”ì²­   
> ğŸ’¡ 2. httpd-vhosts.conf ì—ì„œ https ë¶™ì—¬ì„œ ë¦¬ë‹¤ì´ë ‰íŠ¸    
> ğŸ’¡ 3. httpd-ssl.conf íŒŒì¼ì´ ìˆ˜í–‰ë˜ê³  ë¡œë“œë°¸ëŸ°ì‹± ì„¤ì •ì„ ìˆ˜í–‰   


