---
title:  "ê³µí†µAPI HTTP ìœ í‹¸ë¦¬í‹°"
excerpt: "ê³µí†µAPI HTTP ìœ í‹¸ë¦¬í‹° ì…ë‹ˆë‹¤."

categories:
  - java
tags:
  - [java]

toc: true
toc_sticky: true

last_modified_at: 2023-08-17T09:00:00-18:00:00
---
  
## HttpUtil.java
```java
// Apache HttpCore Â» 4.4.15 í•„ìš”
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;

// Apache HttpClient Â» 4.5.13 í•„ìš” 
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.HttpClients;

```

> â—<span style='color:green'><b><I>Http í†µì‹ ì´ ëŒ€í•˜ì—¬</I></b></span>  
> ğŸ’¡ í”„ë¡œê·¸ë˜ë°ì—ì„œ í†µì‹ í•˜ê¸° ìœ„í•œ ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì¢…ë¥˜ê°€ ë§ë‹¤.  
> ğŸ’¡ ë©”ì´ë¸ë ˆíŒŒì§€í† ë¦¬ ê¸°ì¤€ì—ì„œ ì ìœ ìœ¨ì„ í™•ì¸ í›„ ì‘ì„±í–ˆë‹¤.  
> ğŸ’¡ ê°€ì¥ ëŒ€ì¤‘ì ì´ê³  ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„ íƒí–ˆë‹¤.(ì•„íŒŒì¹˜ 4ë²„ì „)   
> ğŸ’¡ ì•„íŒŒì¹˜ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìµœê·¼ì—” 5ë²„ì „ìœ¼ë¡œ ë°°í¬ì¤‘ì¸ë“¯í•˜ë‹¤. 
>  
> â—<span style='color:green'><b><I>Apache HttpCore Â» 4.4.15</I></b></span>  
> ğŸ’¡ ì´ ë§ˆì§€ë§‰ ë²„ì „ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼ ìœ„ í´ë˜ìŠ¤ ì„í¬íŠ¸ê°€ ê°€ëŠ¥í•˜ë‹¤.  
> ğŸ’¡ 4ë²„ì „ì˜ ë§ˆì§€ë§‰ì¸ 4.4.16 ë¥¼ ì¶”ê°€í•˜ë©´ ì„í¬íŠ¸ ë¶ˆê°€ëŠ¥í•¨ì„ í™•ì¸í–ˆë‹¤.   
>   
> â—<span style='color:green'><b><I>Apache HttpClient Â» 4.5.13</I></b></span>  
> ğŸ’¡ ìœ„ì™€ ë™ì¼í•˜ë‹¤.  

***ë‹¤ìš´ë¡œë“œ ê²½ë¡œ***  
Apache HttpCore Â» 4.4.15: [ë°”ë¡œê°€ê¸° ë§í¬](https://mvnrepository.com/artifact/org.apache.httpcomponents/httpcore/4.4.15)  
Apache HttpClient Â» 4.5.13: [ë°”ë¡œê°€ê¸° ë§í¬](https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient/4.5.13)  
    

### connectGET() : GETìš”ì²­ í›„ String ì–»ê¸°
```java
	/*********************
	 * GET ìš”ì²­ í›„ ì‘ë‹µê²°ê³¼ë¥¼ String ìœ¼ë¡œ ë°›ëŠ”ë‹¤.
	 * 
	 * @param ìš”ì²­ URLì£¼ì†Œ
	 * @return String
	 * @throws IOException 
	 * @throws ClientProtocolException
	 *********************/
	public static String connectGET(String containParamURL) throws ClientProtocolException, IOException 
	{
	  BufferedReader br = null;
	  StringBuilder builder = new StringBuilder();
	  HttpClient httpClient = HttpClients.createDefault();
	  HttpGet get = null;

	  try
	  {
	    get = new HttpGet(containParamURL);

	    HttpResponse response = httpClient.execute(get);
	    int status = response.getStatusLine().getStatusCode();

	    if(status >= 200 && status < 300) 
	    {
	      HttpEntity entity = response.getEntity();

	      br = new BufferedReader(new InputStreamReader(entity.getContent()));
	      String line = null;
	      
	      while((line = br.readLine()) != null) {
	        builder.append(line);
	      }
	    }
	  }
	  finally
	  {
	    if(br != null) {
	      br.close();
	    }
	    if(get != null) {
	      get.releaseConnection();
	    }
	  }

	  return builder.toString();
	}

```

### isConnectURL() : URL ì—°ê²°ì´ ê°€ëŠ¥ì—¬ë¶€ í™•ì¸
```java
	/*********************
	 * í•´ë‹¹ URLì— ì—°ê²°ì´ ê°€ëŠ¥í•œì§€ í™•ì¸í•œë‹¤.
	 * 
	 * @param ìš”ì²­ URLì£¼ì†Œ
	 * @return boolean
	 * @throws
	 *********************/
	public static Boolean isConnectURL(String connectURL) 
	{  
	  try
	  {
	    URL url = new URL(connectURL);

	    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
	    if (url.toString().startsWith("https")) {
	      connection = (HttpsURLConnection) url.openConnection();
	    }
	    ((HttpURLConnection)connection).setRequestMethod("HEAD");

	    int responseCode = connection.getResponseCode();
	    System.out.println("[ì—°ê²° ê°€ëŠ¥í•©ë‹ˆë‹¤!.] isConnectURL("+ connectURL + ") \n ==> responseCode: " + responseCode);

	    if (connection != null) {
	      connection.disconnect();
	    }
	    if (responseCode == 503) {
	      return false;
	    }
	    if (responseCode == HttpURLConnection.HTTP_OK) {
	      return true;
	    }
	  }
	  catch (MalformedURLException e)
	  {
	    System.out.println("isConnectURL("+ connectURL + ") \n ==> MalformedURLException: " + e.toString());
	    return false;
	  }
	  catch (ConnectException e)
	  {
	    System.out.println("isConnectURL("+ connectURL + ") \n ==> ConnectException: " + e.toString());
	    return false;
	  }
	  catch (IOException e)
	  {
	    System.out.println("isConnectURL("+ connectURL + ") \n ==> IOException: " + e.toString());
	  }

	  return true;
	}

```
  
  
### connectCaptureGET() : GETìš”ì²­ í›„ ìº¡ì²˜í•œ ì‘ë‹µë³„ String ì–»ê¸°
```java
	/*********************
	 * GET ìš”ì²­ í›„ íƒ€ì„œë²„ ì ‘ì†í•˜ì—¬ ì‘ë‹µê²°ê³¼ë¥¼ String ìœ¼ë¡œ ë°›ëŠ”ë‹¤.
	 * íƒ€ê²Ÿ ì„œë²„ì¸¡ ë‚´ë¶€ì—ì„œ ë¡œë“œë°¸ëŸ°ì‹± ë“±ì˜ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì²˜ë¦¬ê°€ ì¼ì–´ë‚˜ë©´
   * ì¤‘ê°„ì—ì„œ ì‘ë‹µì„ ìº¡ì²˜í•œë‹¤.
   * 
	 * @param ìš”ì²­ URLì£¼ì†Œ
	 * @return String
	 * @throws IOException 
	 * @throws ClientProtocolException
	 *********************/
	public static String connectCaptureGET(String containParamURL) throws ClientProtocolException, IOException 
	{
    final boolean[] isRedirect = {false};
	  StringBuilder builder = new StringBuilder();
    HttpGet get = null;

    // Yarn Resource ì„œë²„ì¸¡ ë¡œë“œë°¸ëŸ°ì‹±ìœ¼ë¡œ ì¸í•œ HTTP ì‘ë‹µ ì¸í„°ì…‰í„° ìº¡ì²˜ êµ¬í˜„
    HttpResponseInterceptor responseInterceptor = new HttpResponseInterceptor() {
      @Override
      public void process(HttpResponse response, HttpContext context) throws HttpException, IOException {
        int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode == 307) isRedirect[0] = true; //ë¦¬ë‹¤ì´ë ‰íŠ¸ ìº¡ì²˜
      }
    };

    //HttpClient ìƒì„± ë° ì‘ë‹µ ì¸í„°ì…‰í„° ë“±ë¡
    CloseableHttpClient httpClient = HttpClient.custom();
            .addInterceptorLast(responseInterceptor);
            .build();
	  try
	  {
	    get = new HttpGet(containParamURL);

	    HttpResponse response = httpClient.execute(get);
	    int status = response.getStatusLine().getStatusCode();

	    if(status >= 200 && status < 300) 
	    {
        if(isRedirect[0]) return null; //307 ë¡œë“œë°¸ëŸ°ì‹±ì‹œ return
	      HttpEntity entity = response.getEntity();

        // try-with-resources ìì›í•´ì œ
        try (BufferedReader br = new BufferedReader(new InputStreamReader(entitiy.getContent()));) {
          String line = null;
          while((line = br.readLine()) != null) {
	          builder.append(line);
	        }
        }	      
	    }
	  }
	  finally
	  {
      try {
        httpClient.close();
      } catch (Exception e) {
        e.printStackTrace();
      }
    }
	  return builder.toString();
	}

```